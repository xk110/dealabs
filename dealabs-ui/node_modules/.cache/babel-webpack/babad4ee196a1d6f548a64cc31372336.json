{"ast":null,"code":"import { FormGroupDirective, Validators } from '@angular/forms';\nimport { MessageService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"../deal.service\";\nimport * as i5 from \"primeng/card\";\nimport * as i6 from \"primeng/toast\";\nimport * as i7 from \"primeng/inputtext\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"primeng/inputtextarea\";\nimport * as i10 from \"primeng/inputnumber\";\nimport * as i11 from \"primeng/calendar\";\nimport * as i12 from \"primeng/button\";\nimport * as i13 from \"primeng/message\";\n\nfunction DealCreateComponent_small_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 27);\n    i0.ɵɵtext(1, \"Title is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DealCreateComponent_small_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 28);\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DealCreateComponent_p_message_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-message\", 29);\n  }\n}\n\nfunction DealCreateComponent_p_message_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-message\", 30);\n  }\n}\n\nfunction DealCreateComponent_small_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 31);\n    i0.ɵɵtext(1, \"Link is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DealCreateComponent_small_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"Starting Date is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DealCreateComponent_small_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 33);\n    i0.ɵɵtext(1, \"Ending Date is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let DealCreateComponent = /*#__PURE__*/(() => {\n  class DealCreateComponent {\n    constructor(route, fb, messageService, dealService) {\n      this.route = route;\n      this.fb = fb;\n      this.messageService = messageService;\n      this.dealService = dealService;\n      this.autoResize = true;\n    }\n\n    ngOnInit() {\n      this.dealForm = this.fb.group({\n        title: ['', [Validators.required]],\n        description: ['', [Validators.required]],\n        price: ['', [Validators.required]],\n        shippingFees: ['', [Validators.required]],\n        link: ['', [Validators.required]],\n        startingDate: ['', [Validators.required]],\n        endingDate: ['', [Validators.required]]\n      });\n    }\n\n    createDeal() {\n      var _a, _b, _c, _d, _e, _f, _g;\n\n      if (this.dealForm.valid) {\n        const dealToCreate = {\n          title: (_a = this.dealForm.get('title')) === null || _a === void 0 ? void 0 : _a.value,\n          description: (_b = this.dealForm.get('description')) === null || _b === void 0 ? void 0 : _b.value,\n          price: (_c = this.dealForm.get('price')) === null || _c === void 0 ? void 0 : _c.value,\n          shippingFees: (_d = this.dealForm.get('shippingFees')) === null || _d === void 0 ? void 0 : _d.value,\n          link: (_e = this.dealForm.get('link')) === null || _e === void 0 ? void 0 : _e.value,\n          startingDate: (_f = this.dealForm.get('startingDate')) === null || _f === void 0 ? void 0 : _f.value,\n          endingDate: (_g = this.dealForm.get('endingDate')) === null || _g === void 0 ? void 0 : _g.value\n        };\n        const dealObserver = {\n          next: res => {},\n          error: err => {\n            for (const feedback of err.error.feedbacks) {\n              this.messageService.add({\n                key: 'globalMessage',\n                severity: 'error',\n                summary: 'create',\n                detail: feedback.label ? feedback.label : 'error_during_creation',\n                life: 5000\n              });\n            }\n          },\n          complete: () => {\n            this.messageService.add({\n              severity: 'success',\n              summary: 'create',\n              detail: 'create_successful',\n              life: 5000\n            });\n            this.formGroupDirective.resetForm();\n          }\n        };\n        this.dealService.create(dealToCreate).subscribe(dealObserver);\n      } else {\n        this.messageService.add({\n          severity: 'error',\n          summary: 'create',\n          detail: 'invalid_form',\n          life: 5000\n        });\n      }\n    }\n\n  }\n\n  DealCreateComponent.ɵfac = function DealCreateComponent_Factory(t) {\n    return new (t || DealCreateComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i4.DealService));\n  };\n\n  DealCreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DealCreateComponent,\n    selectors: [[\"app-deal-create\"]],\n    viewQuery: function DealCreateComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(FormGroupDirective, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formGroupDirective = _t.first);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 46,\n    vars: 19,\n    consts: [[1, \"p-card-header\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"p-card-content\"], [1, \"p-field\", \"col-12\", \"md-3\"], [\"for\", \"title\"], [\"pInputText\", \"\", \"type\", \"text\", \"id\", \"title\", \"formControlName\", \"title\", 2, \"width\", \"50%\"], [\"id\", \"title-help\", \"class\", \"p-error\", 4, \"ngIf\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", \"pInputTextarea\", \"\", 2, \"width\", \"50%\", 3, \"rows\", \"cols\", \"autoResize\"], [\"id\", \"description-help\", \"class\", \"p-error\", 4, \"ngIf\"], [\"for\", \"locale-france\"], [\"id\", \"price\", \"inputId\", \"locale-france\", \"mode\", \"decimal\", \"locale\", \"fr-FR\", \"formControlName\", \"price\", 3, \"minFractionDigits\"], [\"severity\", \"error\", \"text\", \"price is required\", 4, \"ngIf\"], [\"id\", \"shippingFees\", \"inputId\", \"locale-france\", \"mode\", \"decimal\", \"locale\", \"fr-FR\", \"formControlName\", \"shippingFees\", 3, \"minFractionDigits\"], [\"severity\", \"error\", \"text\", \"shipping fees are required\", 4, \"ngIf\"], [\"for\", \"link\"], [\"pInputText\", \"\", \"type\", \"text\", \"id\", \"link\", \"formControlName\", \"link\", 2, \"width\", \"50%\"], [\"id\", \"link-help\", \"class\", \"p-error\", 4, \"ngIf\"], [\"for\", \"startingDate\"], [\"id\", \"startingDate\", \"formControlName\", \"startingDate\", \"yearRange\", \"2000:2030\", \"inputId\", \"navigators\", 3, \"monthNavigator\", \"yearNavigator\", \"showIcon\"], [\"id\", \"startingDate-help\", \"class\", \"p-error\", 4, \"ngIf\"], [\"for\", \"endingDate\"], [\"id\", \"endingDate\", \"formControlName\", \"endingDate\", \"yearRange\", \"2000:2030\", \"inputId\", \"navigators\", 3, \"monthNavigator\", \"yearNavigator\", \"showIcon\"], [\"id\", \"endingDate-help\", \"class\", \"p-error\", 4, \"ngIf\"], [1, \"p-card-footer\"], [\"pButton\", \"\", \"type\", \"submit\", 1, \"p-button-raised\", \"p-button-rounded\", \"mr-2\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"back to list\", \"routerLink\", \"/deal-list\", 1, \"p-button-raised\", \"p-button-rounded\"], [\"id\", \"title-help\", 1, \"p-error\"], [\"id\", \"description-help\", 1, \"p-error\"], [\"severity\", \"error\", \"text\", \"price is required\"], [\"severity\", \"error\", \"text\", \"shipping fees are required\"], [\"id\", \"link-help\", 1, \"p-error\"], [\"id\", \"startingDate-help\", 1, \"p-error\"], [\"id\", \"endingDate-help\", 1, \"p-error\"]],\n    template: function DealCreateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p-card\");\n        i0.ɵɵelement(1, \"p-toast\");\n        i0.ɵɵelementStart(2, \"div\", 0);\n        i0.ɵɵelementStart(3, \"h2\");\n        i0.ɵɵtext(4, \"Add a new deal\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function DealCreateComponent_Template_form_ngSubmit_5_listener() {\n          return ctx.createDeal();\n        });\n        i0.ɵɵelementStart(6, \"div\", 2);\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelementStart(8, \"label\", 4);\n        i0.ɵɵtext(9, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 5);\n        i0.ɵɵtemplate(11, DealCreateComponent_small_11_Template, 2, 0, \"small\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 3);\n        i0.ɵɵelementStart(13, \"label\", 7);\n        i0.ɵɵtext(14, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"textarea\", 8);\n        i0.ɵɵtemplate(16, DealCreateComponent_small_16_Template, 2, 0, \"small\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 3);\n        i0.ɵɵelementStart(18, \"label\", 10);\n        i0.ɵɵtext(19, \"Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"p-inputNumber\", 11);\n        i0.ɵɵtemplate(21, DealCreateComponent_p_message_21_Template, 1, 0, \"p-message\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 3);\n        i0.ɵɵelementStart(23, \"label\", 10);\n        i0.ɵɵtext(24, \"Shipping Fees\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"p-inputNumber\", 13);\n        i0.ɵɵtemplate(26, DealCreateComponent_p_message_26_Template, 1, 0, \"p-message\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 3);\n        i0.ɵɵelementStart(28, \"label\", 15);\n        i0.ɵɵtext(29, \"Link\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 16);\n        i0.ɵɵtemplate(31, DealCreateComponent_small_31_Template, 2, 0, \"small\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 3);\n        i0.ɵɵelementStart(33, \"label\", 18);\n        i0.ɵɵtext(34, \"Starting Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"p-calendar\", 19);\n        i0.ɵɵtemplate(36, DealCreateComponent_small_36_Template, 2, 0, \"small\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 3);\n        i0.ɵɵelementStart(38, \"label\", 21);\n        i0.ɵɵtext(39, \"Ending Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(40, \"p-calendar\", 22);\n        i0.ɵɵtemplate(41, DealCreateComponent_small_41_Template, 2, 0, \"small\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"div\", 24);\n        i0.ɵɵelementStart(43, \"button\", 25);\n        i0.ɵɵtext(44, \"create\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(45, \"button\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        let tmp_1_0;\n        let tmp_5_0;\n        let tmp_7_0;\n        let tmp_9_0;\n        let tmp_10_0;\n        let tmp_14_0;\n        let tmp_18_0;\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.dealForm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.dealForm.get(\"title\")) == null ? null : tmp_1_0.hasError(\"required\")) && ((tmp_1_0 = ctx.dealForm.get(\"title\")) == null ? null : tmp_1_0.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"rows\", 5)(\"cols\", 30)(\"autoResize\", ctx.autoResize);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.dealForm.get(\"description\")) == null ? null : tmp_5_0.hasError(\"required\")) && ((tmp_5_0 = ctx.dealForm.get(\"description\")) == null ? null : tmp_5_0.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"minFractionDigits\", 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.dealForm.get(\"price\")) == null ? null : tmp_7_0.hasError(\"required\")) && ((tmp_7_0 = ctx.dealForm.get(\"price\")) == null ? null : tmp_7_0.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"minFractionDigits\", 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_9_0 = ctx.dealForm.get(\"shippingFees\")) == null ? null : tmp_9_0.hasError(\"required\")) && ((tmp_9_0 = ctx.dealForm.get(\"shippingFees\")) == null ? null : tmp_9_0.touched));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_10_0 = ctx.dealForm.get(\"link\")) == null ? null : tmp_10_0.hasError(\"required\")) && ((tmp_10_0 = ctx.dealForm.get(\"link\")) == null ? null : tmp_10_0.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"monthNavigator\", true)(\"yearNavigator\", true)(\"showIcon\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_14_0 = ctx.dealForm.get(\"startingDate\")) == null ? null : tmp_14_0.hasError(\"required\")) && ((tmp_14_0 = ctx.dealForm.get(\"startingDate\")) == null ? null : tmp_14_0.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"monthNavigator\", true)(\"yearNavigator\", true)(\"showIcon\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_18_0 = ctx.dealForm.get(\"endingDate\")) == null ? null : tmp_18_0.hasError(\"required\")) && ((tmp_18_0 = ctx.dealForm.get(\"endingDate\")) == null ? null : tmp_18_0.touched));\n      }\n    },\n    directives: [i5.Card, i6.Toast, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i7.InputText, i2.NgControlStatus, i2.FormControlName, i8.NgIf, i9.InputTextarea, i10.InputNumber, i11.Calendar, i12.ButtonDirective, i1.RouterLink, i13.UIMessage],\n    styles: [\".sizes[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.sizes[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]:last-child{margin-bottom:0}.p-field[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:block}\"]\n  });\n  return DealCreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}